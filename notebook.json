{"cells": [{"type": "markdown", "content": "# How to Know if There Are Tags on a Metric in Dynatrace\n\nWhen working with **metrics** in Dynatrace, **tags** are treated as **dimensions**. These dimensions are attached to metric data points and help in **filtering, grouping, and aggregating** metrics in queries and dashboards.\n\nIf you want to know if **tags/dimensions exist on metrics**, you can use **Dynatrace Query Language (DQL)**, **Dynatrace API**, or the **Dynatrace UI (Metrics Explorer)**."}, {"type": "markdown", "content": "## 1. What are Tags on Metrics?\nTags on metrics are **key-value pairs** (similar to tags on services, hosts, and processes) that allow you to:\n- **Group** metrics (e.g., group by `environment=production`).\n- **Filter** metrics (e.g., filter for only **region=us-west-2**).\n- **Aggregate** metrics (e.g., summarize payment success rate for each **application**)."}, {"type": "code", "content": "fetch metrics\n| filter metricName == \"payment.success.rate\"\n| fields tags\n| limit 10"}, {"type": "markdown", "content": "## 2. How to Check for Tags on Metrics Using DQL\n\n### Option 1: List All Tags (Dimensions) on Metrics\nThis query lists all **tags (dimensions)** available on a specific metric.\n\n**DQL Query**:\n```sql\nfetch metrics\n| filter metricName == \"payment.success.rate\"\n| fields tags\n| limit 10\n```\n\n**Expected Output**:\n| **tags**                                              |\n|-------------------------------------------------------|\n| `region=us-west-2`, `application=PaymentService`       |\n| `region=us-east-1`, `application=OrderService`         |\n| `region=ap-south-1`, `application=InventoryService`    |"}, {"type": "code", "content": "fetch metrics\n| filter metricName == \"payment.success.rate\"\n| filter tags.region == \"us-west-2\"\n| fields tags"}, {"type": "markdown", "content": "### Option 2: Check for Specific Tags on a Metric\nThis query checks if a **specific tag (like `region=us-west-2`)** exists on a metric.\n\n**DQL Query**:\n```sql\nfetch metrics\n| filter metricName == \"payment.success.rate\"\n| filter tags.region == \"us-west-2\"\n| fields tags\n```\n\n**Expected Output**:\n| **tags**                                              |\n|-------------------------------------------------------|\n| `region=us-west-2`, `application=PaymentService`       |\n| `region=us-west-2`, `application=OrderService`         |"}, {"type": "code", "content": "fetch metrics\n| filter metricName == \"payment.success.rate\"\n| filter tags IS NOT NULL\n| fields metricName, tags\n| limit 10"}, {"type": "markdown", "content": "### Option 3: Check for the Existence of Any Tags on Metrics\n\n**DQL Query**:\n```sql\nfetch metrics\n| filter metricName == \"payment.success.rate\"\n| filter tags IS NOT NULL\n| fields metricName, tags\n| limit 10\n```\n\nThis query lists all metrics that have at least one tag. The expected output includes the metric name and its associated tags."}, {"type": "code", "content": "fetch metrics\n| summarize count() by (tags IS NOT NULL)"}, {"type": "markdown", "content": "### Option 4: Count Metrics With and Without Tags\nThis query counts how many metrics have **tags** vs. how many do not.\n\n**DQL Query**:\n```sql\nfetch metrics\n| summarize count() by (tags IS NOT NULL)\n```\n\n**Expected Output**:\n| **Has Tags**      | **Count**  |\n|-------------------|------------|\n| true              | 1500       |\n| false             | 500        |"}, {"type": "code", "content": "fetch metrics\n| filter metricName == \"payment.success.rate\"\n| lookup distinct(tags)"}, {"type": "markdown", "content": "### Option 5: List Unique Tags on a Metric\nTo list all **unique tag keys** used on a specific metric (like **payment.success.rate**), use this query.\n\n**DQL Query**:\n```sql\nfetch metrics\n| filter metricName == \"payment.success.rate\"\n| lookup distinct(tags)\n```\n\n**Expected Output**:\n| **tags**                  |\n|--------------------------|\n| region                    |\n| application               |\n| environment               |"}]}